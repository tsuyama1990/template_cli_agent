============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
plugins: devtools-0.12.2, langsmith-0.5.2, mock-3.15.1, anyio-4.12.0, cov-7.0.0, logfire-4.16.0, asyncio-1.3.0, hypothesis-6.148.9
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 16 items

tests/unit/test_config.py ........                                       [ 50%]
tests/unit/test_database.py .....                                        [ 81%]
tests/unit/test_training_engine.py ..                                    [ 93%]
tests/integration/test_workflow.py .                                     [100%]

=============================== warnings summary ===============================
tests/unit/test_config.py::test_dft_result_valid
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.1], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[-0.0, -0.0, -0.1], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.768655411136306, 0.910...226, 0.7383429005587996], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.9066914167403476, 0.26...419, 0.2673900686231633], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.5781669770472918, 0.99...61, 0.10445643526247705], input_type=list])
    return self.__pydantic_serializer__.to_json(

tests/unit/test_config.py::test_dft_result_edge_cases_energy[inf]
tests/unit/test_config.py::test_dft_result_edge_cases_energy[-inf]
tests/unit/test_config.py::test_dft_result_edge_cases_energy[nan]
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    return self.__pydantic_serializer__.to_json(

tests/unit/test_database.py::test_update_labels
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.01, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.01, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.01], input_type=list])
    return self.__pydantic_serializer__.to_json(

tests/unit/test_database.py::test_get_all_labeled_atoms
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    return self.__pydantic_serializer__.to_json(

tests/unit/test_database.py::test_get_all_labeled_atoms
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[1.0, 1.0, 1.0], input_type=list])
    return self.__pydantic_serializer__.to_json(

tests/integration/test_workflow.py::test_end_to_end_workflow
  /app/.venv/lib/python3.12/site-packages/pydantic/main.py:519: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[-0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.1, 0.0, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.1, 0.0], input_type=list])
    PydanticSerializationUnexpectedValue(Expected `float` - serialized value may not be as expected [input_value=[0.0, 0.0, 0.1], input_type=list])
    return self.__pydantic_serializer__.to_json(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                 Stmts   Miss  Cover   Missing
----------------------------------------------------------------------------------
dev_src/__init__.py                                      0      0   100%
dev_src/ac_cdd_core/__init__.py                          0      0   100%
dev_src/ac_cdd_core/agents.py                           49     49     0%   1-110
dev_src/ac_cdd_core/cli.py                             297    297     0%   1-614
dev_src/ac_cdd_core/config.py                           23     23     0%   1-40
dev_src/ac_cdd_core/contracts/__init__.py                0      0   100%
dev_src/ac_cdd_core/domain_models.py                    67     67     0%   1-129
dev_src/ac_cdd_core/error_messages.py                    7      7     0%   4-18
dev_src/ac_cdd_core/graph.py                           366    366     0%   1-845
dev_src/ac_cdd_core/hash_utils.py                       25     25     0%   1-31
dev_src/ac_cdd_core/messages.py                         51     51     0%   4-157
dev_src/ac_cdd_core/process_runner.py                   23     23     0%   1-70
dev_src/ac_cdd_core/sandbox.py                         116    116     0%   1-225
dev_src/ac_cdd_core/service_container.py                18     18     0%   1-22
dev_src/ac_cdd_core/services/__init__.py                 5      5     0%   1-6
dev_src/ac_cdd_core/services/artifacts.py               14     14     0%   1-28
dev_src/ac_cdd_core/services/audit_orchestrator.py      62     62     0%   1-146
dev_src/ac_cdd_core/services/contracts.py               25     25     0%   1-42
dev_src/ac_cdd_core/services/file_ops.py               107    107     0%   1-201
dev_src/ac_cdd_core/services/git_ops.py                208    208     0%   1-478
dev_src/ac_cdd_core/services/jules_client.py           378    378     0%   1-724
dev_src/ac_cdd_core/services/llm_reviewer.py            28     28     0%   1-70
dev_src/ac_cdd_core/services/plan_auditor.py            25     25     0%   1-69
dev_src/ac_cdd_core/services/project.py                 32     32     0%   1-63
dev_src/ac_cdd_core/session_manager.py                 135    135     0%   3-309
dev_src/ac_cdd_core/state.py                            54     54     0%   1-92
dev_src/ac_cdd_core/tools.py                            31     31     0%   1-65
dev_src/ac_cdd_core/utils.py                            54     54     0%   1-149
dev_src/ac_cdd_core/validators.py                       38     38     0%   3-76
src/mlip_autopipec/__init__.py                           0      0   100%
src/mlip_autopipec/cli.py                               40      7    82%   18-19, 29-30, 43-44, 56
src/mlip_autopipec/config.py                            29      0   100%
src/mlip_autopipec/database.py                          38      2    95%   92-93
src/mlip_autopipec/interfaces.py                         8      2    75%   17, 22
src/mlip_autopipec/modules/__init__.py                   0      0   100%
src/mlip_autopipec/modules/explorer_sampler.py           0      0   100%
src/mlip_autopipec/modules/labeling_engine.py           40      8    80%   62-63, 95-100
src/mlip_autopipec/modules/simulation_engine.py          0      0   100%
src/mlip_autopipec/modules/structure_generator.py        0      0   100%
src/mlip_autopipec/modules/training_engine.py           20      0   100%
src/mlip_autopipec/workflow.py                          25      0   100%
----------------------------------------------------------------------------------
TOTAL                                                 2438   2257     7%
======================== 16 passed, 8 warnings in 1.00s ========================
